<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="grunt-preload-assets : A Grunt plugin for generating preload assets manifest files" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>grunt-preload-assets</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/gunta/grunt-preload-assets">View on GitHub</a>

          <h1 id="project_title">grunt-preload-assets</h1>
          <h2 id="project_tagline">A Grunt plugin for generating preload assets manifest files</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/gunta/grunt-preload-assets/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/gunta/grunt-preload-assets/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>grunt-preload-assets</h1>

<blockquote>
<p>A Grunt plugin for generating preload assets manifest files.<br>
Supports <a href="http://www.createjs.com/#!/PreloadJS">PreloadJS</a>, <a href="http://thinkpixellab.com/pxloader/">PxLoader</a>, JSON, JS, CSV, and unlimited support for multiple formats by using <a href="http://www.2ality.com/2012/06/underscore-templates.html">underscore templates</a>.
By <a href="https://github.com/gunta/">@gunta</a>.</p>
</blockquote>

<p><img src="http://gunta.github.com/grunt-preload-assets/images/grunt-preload-assets-logo.jpg" alt="image"></p>

<h2>Getting Started</h2>

<p>If you haven't used <a href="http://gruntjs.com/">Grunt</a> before, be sure to check out the <a href="http://gruntjs.com/getting-started">Getting Started</a> guide, as it explains how to create a <a href="http://gruntjs.com/sample-gruntfile">Gruntfile</a> as well as install and use Grunt plugins. Once you're familiar with that process, you may install this plugin with this command:</p>

<p>Add to your <code>package.json</code> entry:</p>

<pre><code>"grunt-preload-assets": "git+ssh://git@github.com:gunta/grunt-preload-assets.git"
</code></pre>

<p>Or just use:</p>

<pre lang="shell"><code>npm install git+ssh://git@github.com:gunta/grunt-preload-assets.git --save-dev
</code></pre>

<h2>Preload Assets task</h2>

<p><em>Run this task with the <code>grunt preload_assets</code> command.</em></p>

<p>Task targets, files and options may be specified according to the grunt <a href="http://gruntjs.com/configuring-tasks">Configuring tasks</a> guide.</p>

<h3>Options</h3>

<h4>template</h4>

<p>Type: <code>String</code><br>
Choices:    </p>

<ul>
<li><code>preloadjs</code></li>
<li><code>pxloader</code></li>
<li><code>json</code></li>
<li><code>json-idaskey</code></li>
<li><code>csv</code></li>
<li><code>custom-sample</code></li>
<li>Or a path to a template file.<br>
</li>
</ul><p>Default: <code>json</code></p>

<p>Selects a template for generating the assets list.
The output can be customized by creating your own <a href="http://www.2ality.com/2012/06/underscore-templates.html">underscore template</a>. </p>

<h3>Detecting options</h3>

<h4>detectId</h4>

<p>Type: <code>Boolean</code><br>
Default: <code>true</code></p>

<p>Includes an <strong>identifier</strong> in the output.<br>
By default, it <strong>camelizes the filename and removes the extension</strong>.</p>

<h4>detectSrc</h4>

<p>Type: <code>Boolean</code><br>
Default: <code>true</code></p>

<p>Includes the file path.</p>

<h4>detectType</h4>

<p>Type: <code>Boolean</code><br>
Default: <code>true</code></p>

<p>Analyzes each asset file type and includes it.<br>
By default, the supported file types are <code>IMAGE</code> <code>SOUND</code> <code>JSON</code> <code>XML</code> <code>CSS</code> <code>JAVASCRIPT</code> <code>SVG</code> and <code>TEXT</code>.</p>

<h4>detectBytes</h4>

<p>Type: <code>Boolean</code><br>
Default: <code>false</code>    </p>

<p>Includes each asset file size <strong>in bytes</strong>.<br>
Useful when creating realistic progress bars.</p>

<h4>detectTotalBytes</h4>

<p>Type: <code>Boolean</code><br>
Default: <code>false</code>    </p>

<p>Includes the sum of all assets file sizes <strong>in bytes</strong>.<br>
Useful when creating realistic progress bars.</p>

<h4>detectLastModified</h4>

<p>Type: <code>Boolean</code><br>
Default: <code>false</code>    </p>

<p>Includes each asset file last modified timestamp <strong>in unixtime</strong>.<br>
Useful when comparing file changes or implementing a cache system.</p>

<h4>detectMD5</h4>

<p>Type: <code>Boolean</code><br>
Default: <code>false</code>    </p>

<p>Includes each asset file <strong>md5 hash</strong> trimmed to the first <strong>8 chars</strong>.<br>
Useful when creating a cache system more reliable than one based on timestamps or checking integrity. </p>

<h4>detectBase64</h4>

<p>Type: <code>Boolean</code><br>
Default: <code>false</code>    </p>

<p>Includes each entire asset file encoded in a <strong>base64 string</strong>.<br>
Useful when the asset file sizes are small, to reduce http requests.</p>

<h4>detectDimensions</h4>

<p>Type: <code>Boolean</code><br>
Default: <code>false</code>    </p>

<p>For <code>IMAGE</code> files: Includes each asset file <code>width</code> and <code>height</code> <strong>in pixels</strong>.<br>
Useful so one doesn't need to manually write the width/height everytime for each file.</p>

<p><em>Currently this only works on OS X (Waiting your pull request)</em> ðŸ˜‰</p>

<p><em>Note that not every template needs to add support to all these properties.</em></p>

<h3>Advanced Options</h3>

<h4>key</h4>

<p>Type: <code>String</code><br>
Default: <code>filesManifest</code></p>

<p>Specifies a key name for the root container.</p>

<h4>ignoreBasePath</h4>

<p>Type: <code>String</code><br>
Default: <code>undefined</code></p>

<p>Ignores a specific base path from the specified <code>src</code>.</p>

<h4>processSrc</h4>

<p>Type: <code>Function</code><br>
Parameter: <code>String</code> filename</p>

<p>Overrides the function for processing the src filename.</p>

<h4>processId</h4>

<p>Type: <code>Function</code><br>
Parameter: <code>String</code> filename</p>

<p>Overrides the function for processing the id.</p>

<h4>processType</h4>

<p>Type: <code>Function</code><br>
Parameter: <code>String</code> filename</p>

<p>Overrides the function for processing the file type.</p>

<h4>processBytes</h4>

<p>Type: <code>Function</code><br>
Parameter: <code>Number</code> bytes</p>

<p>Overrides the function for processing the number of bytes.</p>

<h4>processTotalBytes</h4>

<p>Type: <code>Function</code><br>
Parameter: <code>String</code> filename</p>

<p>Overrides the function for processing the number of total bytes.</p>

<h4>processDimensions</h4>

<p>Type: <code>Function</code><br>
Parameter: <code>String</code> filename</p>

<p>Overrides the function for processing the dimensions of the file.</p>

<h4>processMD5</h4>

<p>Type: <code>Function</code><br>
Parameter: <code>String</code> filename</p>

<p>Overrides the function for processing the md5 hash for the file.</p>

<h4>processLastModified</h4>

<p>Type: <code>Function</code><br>
Parameter: <code>String</code> filename</p>

<p>Overrides the function for processing the last modified date.</p>

<h4>processBase64</h4>

<p>Type: <code>Function</code><br>
Parameter: <code>String</code> filename</p>

<p>Overrides the function for processing the base64 encode of the file.</p>

<h2>Usage examples</h2>

<h3>Basic usage</h3>

<div class="highlight"><pre><span class="c1">// Project configuration.</span>
<span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
    <span class="nx">preload_assets</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">my_target</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">files</span><span class="o">:</span> <span class="p">{</span>
                <span class="s1">'dest/filesmanifest.js'</span><span class="o">:</span> <span class="p">[</span><span class="s1">'src/*.png'</span><span class="p">,</span> <span class="s1">'src/*.jpg'</span><span class="p">]</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>

<p>Will produce something like this:</p>

<div class="highlight"><pre><span class="p">{</span>
    <span class="nt">"filesManifest"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"files"</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"testFixturesGenericButton"</span><span class="p">,</span>
                <span class="nt">"src"</span><span class="p">:</span> <span class="s2">"test/fixtures/genericButton.png"</span><span class="p">,</span>
                <span class="nt">"type"</span><span class="p">:</span> <span class="s2">"IMAGE"</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"testFixturesGenericButtonOver"</span><span class="p">,</span>
                <span class="nt">"src"</span><span class="p">:</span> <span class="s2">"test/fixtures/genericButtonOver.png"</span><span class="p">,</span>
                <span class="nt">"type"</span><span class="p">:</span> <span class="s2">"IMAGE"</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"testFixturesParallaxHill1"</span><span class="p">,</span>
                <span class="nt">"src"</span><span class="p">:</span> <span class="s2">"test/fixtures/parallaxHill1.png"</span><span class="p">,</span>
                <span class="nt">"type"</span><span class="p">:</span> <span class="s2">"IMAGE"</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"testFixturesSky"</span><span class="p">,</span>
                <span class="nt">"src"</span><span class="p">:</span> <span class="s2">"test/fixtures/sky.png"</span><span class="p">,</span>
                <span class="nt">"type"</span><span class="p">:</span> <span class="s2">"IMAGE"</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"testFixturesImage2"</span><span class="p">,</span>
                <span class="nt">"src"</span><span class="p">:</span> <span class="s2">"test/fixtures/image2.jpg"</span><span class="p">,</span>
                <span class="nt">"type"</span><span class="p">:</span> <span class="s2">"IMAGE"</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<h3>PreloadJS sample</h3>

<div class="highlight"><pre><span class="c1">// Project configuration.</span>
<span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
    <span class="nx">preload_assets</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">my_target</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
                <span class="nx">ignoreBasePath</span><span class="o">:</span> <span class="s1">'somebasepath/path/'</span><span class="p">,</span>
                <span class="nx">template</span><span class="o">:</span> <span class="s1">'preloadjs'</span>
            <span class="p">},</span>
            <span class="nx">files</span><span class="o">:</span> <span class="p">{</span>
                <span class="s1">'dest/filesmanifest.js'</span><span class="o">:</span> <span class="p">[</span><span class="s1">'somebasepath/path/*.png'</span><span class="p">,</span> <span class="s1">'somebasepath/path/*.jpg'</span><span class="p">]</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>

<p>Will produce this:</p>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">filesManifest</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s1">'genericButton'</span><span class="p">,</span> <span class="nx">src</span><span class="o">:</span> <span class="s1">'genericButton.png'</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="nx">createjs</span><span class="p">.</span><span class="nx">LoadQueue</span><span class="p">.</span><span class="nx">IMAGE</span><span class="p">},</span>
    <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s1">'genericButtonOver'</span><span class="p">,</span> <span class="nx">src</span><span class="o">:</span> <span class="s1">'genericButtonOver.png'</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="nx">createjs</span><span class="p">.</span><span class="nx">LoadQueue</span><span class="p">.</span><span class="nx">IMAGE</span><span class="p">},</span>
    <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s1">'parallaxHill1'</span><span class="p">,</span> <span class="nx">src</span><span class="o">:</span> <span class="s1">'parallaxHill1.png'</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="nx">createjs</span><span class="p">.</span><span class="nx">LoadQueue</span><span class="p">.</span><span class="nx">IMAGE</span><span class="p">},</span>
    <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s1">'sky'</span><span class="p">,</span> <span class="nx">src</span><span class="o">:</span> <span class="s1">'sky.png'</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="nx">createjs</span><span class="p">.</span><span class="nx">LoadQueue</span><span class="p">.</span><span class="nx">IMAGE</span><span class="p">},</span>
    <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="s1">'image2'</span><span class="p">,</span> <span class="nx">src</span><span class="o">:</span> <span class="s1">'image2.jpg'</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="nx">createjs</span><span class="p">.</span><span class="nx">LoadQueue</span><span class="p">.</span><span class="nx">IMAGE</span><span class="p">}</span>
<span class="p">];</span>
</pre></div>

<h3>JSON full options sample</h3>

<div class="highlight"><pre><span class="c1">// Project configuration.</span>
<span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
    <span class="nx">preload_assets</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">my_target</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
                <span class="nx">template</span><span class="o">:</span> <span class="s1">'json'</span><span class="p">,</span>
                <span class="nx">detectId</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="nx">detectBytes</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="nx">detectTotalBytes</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="nx">detectSrc</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="nx">detectLastModified</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                <span class="nx">detectMD5</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="nx">detectBase64</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="nx">detectDimensions</span><span class="o">:</span> <span class="kc">true</span>
            <span class="p">},</span>
            <span class="nx">files</span><span class="o">:</span> <span class="p">{</span>
                <span class="s1">'dest/filesmanifest.js'</span><span class="o">:</span> <span class="p">[</span><span class="s1">'test/fixtures/*.*'</span><span class="p">]</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>

<p>Will produce this:</p>

<div class="highlight"><pre><span class="p">{</span>
    <span class="nt">"filesManifest"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"files"</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"testFixturesCabinBoy"</span><span class="p">,</span>
                <span class="nt">"src"</span><span class="p">:</span> <span class="s2">"test/fixtures/CabinBoy.mp3"</span><span class="p">,</span>
                <span class="nt">"bytes"</span><span class="p">:</span> <span class="mi">9529</span><span class="p">,</span>
                <span class="nt">"md5"</span><span class="p">:</span> <span class="s2">"bc1d817c"</span><span class="p">,</span>
                <span class="nt">"base64"</span><span class="p">:</span> <span class="s2">"SUQzAwAAAAAlH1RSUQzAwAAAAAlH1RZRVIMjAxMC0xMC0yMlQxwNjowM..."</span><span class="p">,</span>
                <span class="nt">"lastModified"</span><span class="p">:</span> <span class="mi">1363601857000</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"testFixturesThunder"</span><span class="p">,</span>
                <span class="nt">"src"</span><span class="p">:</span> <span class="s2">"test/fixtures/Thunder.ogg"</span><span class="p">,</span>
                <span class="nt">"bytes"</span><span class="p">:</span> <span class="mi">71083</span><span class="p">,</span>
                <span class="nt">"md5"</span><span class="p">:</span> <span class="s2">"076b3c87"</span><span class="p">,</span>
                <span class="nt">"base64"</span><span class="p">:</span> <span class="s2">"1RZRVIAAAAaAASUQzAwAAAAAlH1RZRVIAAAAaAAAAMjAxMC0xMC0ywNjowM..."</span><span class="p">,</span>
                <span class="nt">"lastModified"</span><span class="p">:</span> <span class="mi">1363601857000</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"testFixturesFont"</span><span class="p">,</span>
                <span class="nt">"src"</span><span class="p">:</span> <span class="s2">"test/fixtures/font.css"</span><span class="p">,</span>
                <span class="nt">"bytes"</span><span class="p">:</span> <span class="mi">37</span><span class="p">,</span>
                <span class="nt">"md5"</span><span class="p">:</span> <span class="s2">"34b228cf"</span><span class="p">,</span>
                <span class="nt">"base64"</span><span class="p">:</span> <span class="s2">"ZGl2IHsKICAgY29sb3I6ICMyNMC0xmIzZjggIWltcG9ydGFudDsKfQ..."</span><span class="p">,</span>
                <span class="nt">"lastModified"</span><span class="p">:</span> <span class="mi">1363601857000</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"testFixturesGenericButton"</span><span class="p">,</span>
                <span class="nt">"src"</span><span class="p">:</span> <span class="s2">"test/fixtures/genericButton.png"</span><span class="p">,</span>
                <span class="nt">"bytes"</span><span class="p">:</span> <span class="mi">2832</span><span class="p">,</span>
                <span class="nt">"width"</span><span class="p">:</span> <span class="mi">150</span><span class="p">,</span>
                <span class="nt">"height"</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
                <span class="nt">"md5"</span><span class="p">:</span> <span class="s2">"7a36698a"</span><span class="p">,</span>
                <span class="nt">"base64"</span><span class="p">:</span> <span class="s2">"iVBONvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2FTkSuQmCC..."</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="nt">"..."</span><span class="p">:</span> <span class="s2">"............"</span>
            <span class="p">}</span>
        <span class="p">],</span>
        <span class="nt">"totalBytes"</span><span class="p">:</span> <span class="mi">206944</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<h3>CSV options sample</h3>

<div class="highlight"><pre><span class="c1">// Project configuration.</span>
<span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
    <span class="nx">preload_assets</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">my_target</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
                    <span class="nx">template</span><span class="o">:</span> <span class="s1">'csv'</span>
            <span class="p">},</span>
            <span class="nx">files</span><span class="o">:</span> <span class="p">{</span>
                <span class="s1">'dest/filesmanifest.csv'</span><span class="o">:</span> <span class="p">[</span><span class="s1">'test/fixtures/*.*'</span><span class="p">]</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>

<p>Will produce this:</p>

<pre lang="csv"><code>test/fixtures/CabinBoy.mp3,test/fixtures/Thunder.ogg,test/fixtures/font.css,test/fixtures/gbot.svg,test/fixtures/genericButton.png,test/fixtures/genericButtonOver.png,test/fixtures/grant.json,test/fixtures/grant.xml,test/fixtures/image2.jpg,test/fixtures/loader.gif,test/fixtures/parallaxHill1.png,test/fixtures/sky.png
</code></pre>

<h2>Release History</h2>

<h3>0.2.0</h3>

<ul>
<li>First NPM package release</li>
</ul><h3>0.1.2</h3>

<ul>
<li>Changed option parameters to a single hash because they would be overridden with a new object if passed</li>
<li>Changed idaskey to hash for better naming</li>
<li>Added bytes to PreloadJS template</li>
</ul><h3>0.1.1</h3>

<ul>
<li>Added timestamp support</li>
<li>Added base64 support</li>
<li>Added md5 support</li>
<li>Added flag for optional switching of options</li>
<li>Added JSON template, with key and array version</li>
<li>Added CSV support</li>
<li>Added totalBytes support</li>
<li>Replaced lodash with grunt.util._</li>
</ul>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">grunt-preload-assets maintained by <a href="https://github.com/gunta">gunta</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-40807861-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>
